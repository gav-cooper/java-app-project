<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/css/recommendation.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/js/recommendation.js" defer></script>
    <title>Recommendation New Song for you!</title>
</head>
<body>
    <nav class="topbar">
<<<<<<< HEAD
        <%- include ('navbar.ejs') %>
    </nav>
    <h1> Hello <%= user.username %>!</h1>
    <p>This is the recommendation music for you</p>
    <img style="width:50px"class="pfp" src="<%= user.pfpPath %>">
    <div class="pfp-wrapper">
        <form action="/users/<%= user.userID %>/pfp" method="POST" enctype="multipart/form-data">
            <span>Set profile picture:</span>
            <input type="file" name="pfp" required>
            <button>Submit</button>
        </form>
=======
        <a href="main.html">Home</a>
        <a href="/uploadSong">Upload</a>
        <a href="#page1">Playlist</a>
        <a href="account">Account</a>
        <a href="/recommendation">Recommendation</a>
        <a href="logout.html" style="float: right">Logout</a>
    </nav>

    <div class="post" style="text-align: center;">
        <h1 id="username" value="user.username"> Let's get started, <%= user.username %>!</h1>
        <p style="line-height: 100%;">We hope that you like this music!!!</p>
        <hr>
        <div class="content">
            <p style="line-height: 100%;">This is the sample musics: Rock, Hiphop and Classic</p>
            
            <div>
            <button onclick="randomplay(playlist)">play the sample music</button>
            </div>
            <script>
                /*the music list*/
                const playlist=[
                "music/rock/sample1.mp3",
                "music/rock/sample2.mp3", 
                "music/hiphop/sample1.mp3", 
                "music/hiphop/sample2.mp3",
                "music/classic/sample1.mp3", 
                "music/classic/sample2.mp3" 
                ]
                /* audio object */
                const myaudio = new Audio(playlist);

                /* get random music */
                function randomplay(list){
                    myaudio.src = list[Math.floor(Math.random()*list.length)];
                    myaudio.play();
                    codument.getElementById("playing").textContent = 
                    "[playing]" + +myaudio.src.match( /[^\/]+$/ );
                }
                    
            </script>
            <!-- if to get the music from database it will work
                <div id="music" value="music.originalName">
                    <p>Playing <%music.originalName%>!</p>
                </div>
            -->
            
            <audio controls>
                <source src="music.musicPath">
            </audio>

            <div>
                <button onclick="myaudio_play(music)">Play the recommendation music</button>
            </div>
            <script>
                const getrecommend = require("../Models/recommendationModel")
                let mybutton = document.querySelector('button')
                mybutton.onclick = () => {
                    music = recommend.recommendation(user.userID);
                }
                const myaudio1 = new Audio(music);
                function myaudio_play(music){
                    myaudio1.src = music;
                    myaudio1.play()
                };

            </script>

            <p style="line-height: 100%;">Do you like this music?</p>
            <div class="rate-form">
                <form id="recommendationForm">
                    <div>
                    <input id="star5" type="radio" name="rate" value="5">
                    <label for="star5">★</label>
                    <input id="star4" type="radio" name="rate" value="4">
                    <label for="star4">★</label>
                    <input id="star3" type="radio" name="rate" value="3">
                    <label for="star3">★</label>
                    <input id="star2" type="radio" name="rate" value="2">
                    <label for="star2">★</label>
                    <input id="star1" type="radio" name="rate" value="1">
                    <label for="star1">★</label>
                    </div>
                    <input id="preference" type="submit" value="rate">
                </form>
            </div>
            
        </div>
        <div id = "errors"></div>
>>>>>>> refs/remotes/origin/main
    </div>
    
</body>
</html>